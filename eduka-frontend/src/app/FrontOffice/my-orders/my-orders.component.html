<div class="container mt-5">
  <h1 class="display-5 mb-4"><i class="bi bi-bag-check"></i> My Orders</h1>
  
  <!-- Filter -->
  <div class="row mb-4">
    <div class="col-md-4">
      <select class="form-select" [(ngModel)]="filterStatus" (change)="filterOrders()">
        <option value="">All Orders</option>
        <option *ngFor="let status of orderStatuses" [value]="status">{{ status }}</option>
      </select>
    </div>
  </div>

  <!-- Orders List -->
  <div class="row">
    <div class="col-md-12">
      <div class="card mb-3" *ngFor="let order of filteredOrders">
        <div class="card-body">
          <div class="row">
            <div class="col-md-8">
              <h5>Order #{{ order.id }}</h5>
              <p class="text-muted mb-1">
                <i class="bi bi-calendar"></i> {{ order.createdAt | date: 'medium' }}
              </p>
              <p class="text-muted">
                <i class="bi bi-geo-alt"></i> {{ order.deliveryAddress }}
              </p>
            </div>
            <div class="col-md-4 text-end">
              <h4 class="text-primary">${{ order.totalAmount?.toFixed(2) }}</h4>
              <span class="badge" [ngClass]="getStatusBadgeClass(order.status!)">
                {{ order.status }}
              </span>
              <br />
              <button class="btn btn-sm btn-outline-primary mt-2" (click)="openOrderDetails(order)">
                <i class="bi bi-eye"></i> View Details
              </button>
            </div>
          </div>
        </div>
      </div>
      
      <div *ngIf="filteredOrders.length === 0" class="alert alert-info text-center">
        <h4>No orders found</h4>
        <p>You haven't placed any orders yet.</p>
      </div>
    </div>
  </div>
</div>

<!-- Order Details Modal -->
<div class="modal fade" [class.show]="showDetailModal" [style.display]="showDetailModal ? 'block' : 'none'" *ngIf="showDetailModal && selectedOrder">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header bg-primary text-white">
        <h5>Order #{{ selectedOrder.id }}</h5>
        <button class="btn-close btn-close-white" (click)="closeDetailModal()"></button>
      </div>
      <div class="modal-body">
        <p><strong>Status:</strong> <span class="badge" [ngClass]="getStatusBadgeClass(selectedOrder.status!)">{{ selectedOrder.status }}</span></p>
        <p><strong>Total:</strong> ${{ selectedOrder.totalAmount?.toFixed(2) }}</p>
        <p><strong>Delivery Address:</strong> {{ selectedOrder.deliveryAddress }}</p>
        <p><strong>Notes:</strong> {{ selectedOrder.notes || 'None' }}</p>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" (click)="closeDetailModal()">Close</button>
      </div>
    </div>
  </div>
</div>
<div class="modal-backdrop fade" [class.show]="showDetailModal" *ngIf="showDetailModal"></div>
